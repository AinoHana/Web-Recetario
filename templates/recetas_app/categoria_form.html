{# apps/recetas_app/templates/recetas_app/categoria_form.html #}
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ accion }} Categoría - El Recetario{% endblock %}

{% block content %}
<div class="main-content-new">
    <div class="form-container">
        <h1 class="form-title">{{ accion }} Categoría</h1>
        
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        {# Eliminamos enctype="multipart/form-data" ya que no hay subida de archivos #}
        <form method="post" class="recipe-form">
            {% csrf_token %}

            <div class="form-section">
                <div class="form-field">
                    {# Campo para el nombre de la categoría #}
                    {{ form.nombre.label_tag }}
                    {{ form.nombre }}
                    {% if form.nombre.errors %}<div class="error-message">{{ form.nombre.errors }}</div>{% endif %}
                </div>
                
                {# Nuevo campo para el icono de Font Awesome #}
                <div class="form-field">
                    <label for="{{ form.fa_icon.id_for_label }}">Clase de Ícono (Font Awesome):</label>
                    {{ form.fa_icon }}
                    {% if form.fa_icon.errors %}<div class="error-message">{{ form.fa_icon.errors }}</div>{% endif %}
                    <small class="form-text-info">Ejemplo: `fas fa-utensils`. Puedes encontrar la clase en el <a href="https://fontawesome.com/v5/search?m=free" target="_blank">sitio de Font Awesome</a>.</small>
                </div>

                {# El slug se mantiene como un campo de solo lectura si estamos editando #}
                {% if accion == 'Editar' %}
                    <div class="form-field">
                        <label>Slug (automático):</label>
                        <p class="form-text-display">{{ categoria.slug }}</p>
                    </div>
                {% endif %}
            </div>

            <div class="form-actions">
                <button type="submit" class="button-primary submit-button">Guardar Categoría</button>
                <a href="{% url 'recetas_app:lista_categorias' %}" class="button-secondary cancel-button">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
